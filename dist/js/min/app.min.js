"use strict";function ajaxGet(e,t){var s=new XMLHttpRequest;s.open("GET",e),s.addEventListener("load",function(){s.status>=200&&s.status<400?t(s.responseText):console.error(s.status+" "+s.statusText+" "+e)}),s.addEventListener("error",function(){console.error("Erreur rÃ©seau avec l'URL "+e)}),s.send(null)}
"use strict";function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}$(function(){var a=function a(e,r,t,s,n){_classCallCheck(this,a),this.avatar=e,this.comment=r,this.words=t,this.admin=s,this.userName=n},e=function a(e,r,t){_classCallCheck(this,a),this.avatar=e,this.userName=r};cleanArray=function(a){var e,r,t=a.length,s=[],n={};for(e=0;e<t;e++)n[a[e]]=0;for(r in n)s.push(r);return s},$("#btn-url-github").on("click",function(r){r.preventDefault();var t=$("#url-github").val().split("https://github.com/")[1],s=[];ajaxGet("https://api.github.com/repos/"+t,function(e){var r=$.parseJSON(e),t=r.user.avatar_url,n=r.body,m=r.user.login,o=r.body.length;$(".search form").after("<h3>"+r.title+"</h3>"),$("#infos").append('<div class="wrap-user-comment" data-user='+m+' data-words="'+o+'"></div>'),$(".wrap-user-comment").append('<img class="avatar-github" src='+t+" />").append("<p>"+n+"</p>");var i=new a(t,n,o,!0,m);s.push(i)}),ajaxGet("https://api.github.com/repos/"+t+"/comments",function(r){var t=$.parseJSON(r),n=$(".wrap-user-comment").first().data("user");for(comment in t){var m=t[comment].user.avatar_url,o=t[comment].body,i=t[comment].body.length,u=t[comment].user.login,c="user"+comment;c=new a(m,o,i,u===n,u),s.push(c)}for(user in s)$("#infos").last().append('<div class="wrap-comment" data-user='+s[user].userName+" data-words="+s[user].words+"></div>"),$(".wrap-comment").last().append('<img class="avatar-github" src='+s[user].avatar+" />").append("<p>"+s[user].comment+"</p>"),!0===s[user].admin&&$(".wrap-comment").eq(user).addClass("wrap-user-comment");$("#infos .wrap-user-comment").first().remove(),$(".wrap-user-comment").removeClass("wrap-comment");var p=[],l=[];for(tab in s){var d=s[tab].avatar,h=s[tab].userName;p.push(d),l.push(h)}var v=cleanArray(p),b=cleanArray(l);for(member in v){var f="user"+comment,g=v[member],w=b[member];f=new e(g,w),$("#member").append('<div class="wrap-member"></div>'),$(".wrap-member").last().attr("data-user",""+f.userName).append('<img class="avatar-github" src='+f.avatar+"/>").append("<p>"+f.userName+"</p>").append('<input type="checkbox"/>')}var C=$(".js-size").outerHeight(!0);$(".wrap-users-member").outerHeight(C);var y=document.getElementById("myChart").getContext("2d");new Chart(y,{type:"pie",data:{labels:b,datasets:[{label:"My First dataset",backgroundColor:"#0def87",data:[50,50,50]}]},options:{}})}),$("#url-github").val("")}),$(document).on("click",".wrap-member",function(){var a=$(this).attr("data-user");$(this).find("input").prop("checked"),$(this).toggleClass("wrap-member-hide");$("#infos").find("[data-user="+a+"]").toggle()})});