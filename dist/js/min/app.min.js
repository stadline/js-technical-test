"use strict";function ajaxGet(e,t){var s=new XMLHttpRequest;s.open("GET",e),s.addEventListener("load",function(){s.status>=200&&s.status<400?t(s.responseText):console.error(s.status+" "+s.statusText+" "+e)}),s.addEventListener("error",function(){console.error("Erreur rÃ©seau avec l'URL "+e)}),s.send(null)}
"use strict";function _classCallCheck(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}$(function(){var a=function a(r,e,t,s,n){_classCallCheck(this,a),this.avatar=r,this.comment=e,this.words=t,this.admin=s,this.userName=n};cleanArray=function(a){var r,e,t=a.length,s=[],n={};for(r=0;r<t;r++)n[a[r]]=0;for(e in n)s.push(e);return s},$("#btn-url-github").on("click",function(r){r.preventDefault();var e=$("#url-github").val().split("https://github.com/")[1],t=[];ajaxGet("https://api.github.com/repos/"+e,function(r){var e=$.parseJSON(r),s=e.user.avatar_url,n=e.body,o=e.user.login,u=e.body.length;$(".search form").after("<h3>"+e.title+"</h3>"),$("#infos").append('<div class="wrap-user-comment" data-user='+o+' data-words="'+u+'"></div>'),$(".wrap-user-comment").append('<img class="avatar-github" src='+s+" />").append("<p>"+n+"</p>");var c=new a(s,n,u,!0,o);t.push(c)}),ajaxGet("https://api.github.com/repos/"+e+"/comments",function(r){var e=$.parseJSON(r),s=$(".wrap-user-comment").first().data("user");for(comment in e){var n=e[comment].user.avatar_url,o=e[comment].body,u=e[comment].body.length,c=e[comment].user.login,m="user"+comment;m=new a(n,o,u,c===s,c),t.push(m)}for(user in t)$("#infos").last().append('<div class="wrap-comment" data-user='+t[user].userName+" data-words="+t[user].words+"></div>"),$(".wrap-comment").last().append('<img class="avatar-github" src='+t[user].avatar+" />").append("<p>"+t[user].comment+"</p>"),!0===t[user].admin&&$(".wrap-comment").eq(user).addClass("wrap-user-comment");$("#infos .wrap-user-comment").first().remove(),$(".wrap-user-comment").removeClass("wrap-comment");var i=[],p=[];for(tab in t){var l=t[tab].avatar,h=t[tab].userName;i.push(l),p.push(h)}console.log(i,p);var d=cleanArray(i),v=cleanArray(p);console.log(d,v)}),$("#url-github").val("")})});