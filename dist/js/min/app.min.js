"use strict";function ajaxGet(e,t){var s=new XMLHttpRequest;s.open("GET",e),s.addEventListener("load",function(){s.status>=200&&s.status<400?t(s.responseText):console.error(s.status+" "+s.statusText+" "+e)}),s.addEventListener("error",function(){console.error("Erreur rÃ©seau avec l'URL "+e)}),s.send(null)}
"use strict";function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}$(function(){var a=function a(e,r,t,s,n){_classCallCheck(this,a),this.avatar=e,this.comment=r,this.words=t,this.admin=s,this.userName=n},e=function a(e,r,t){_classCallCheck(this,a),this.avatar=e,this.userName=r};cleanArray=function(a){var e,r,t=a.length,s=[],n={};for(e=0;e<t;e++)n[a[e]]=0;for(r in n)s.push(r);return s},$(".js-size").hide(),$("#btn-url-github").on("click",function(r){r.preventDefault(),$("#member, #infos").children().remove(),$(".search h3").remove();var t=$("#url-github").val().split("https://github.com/")[1];$(".js-size").show();var s=[];ajaxGet("https://api.github.com/repos/"+t,function(e){var r=$.parseJSON(e),t=r.user.avatar_url,n=r.body,o=r.user.login,i=r.body.length;$(".search form").after("<h3>"+r.title+"</h3>"),$("#infos").append('<div class="wrap-user-comment" data-user='+o+' data-words="'+i+'"></div>'),$(".wrap-user-comment").append('<img class="avatar-github" src='+t+" />").append("<p>"+n+"</p>");var m=new a(t,n,i,!0,o);s.push(m)}),ajaxGet("https://api.github.com/repos/"+t+"/comments",function(r){var t=$.parseJSON(r),n=$(".wrap-user-comment").first().data("user");for(comment in t){var o=t[comment].user.avatar_url,i=t[comment].body,m=t[comment].body.length,u=t[comment].user.login,p="user"+comment;p=new a(o,i,m,u===n,u),s.push(p)}for(user in s)$("#infos").last().append('<div class="wrap-comment" data-user='+s[user].userName+" data-words="+s[user].words+"></div>"),$(".wrap-comment").last().append('<img class="avatar-github" src='+s[user].avatar+" />").append("<p>"+s[user].comment+"</p>"),!0===s[user].admin&&$(".wrap-comment").eq(user).addClass("wrap-user-comment");$("#infos .wrap-user-comment").first().remove(),$(".wrap-user-comment").removeClass("wrap-comment");var c=[],l=[];for(tab in s){var h=s[tab].avatar,d=s[tab].userName;c.push(h),l.push(d)}var v=cleanArray(c),f=cleanArray(l);for(member in v){var b="user"+comment,g=v[member],w=f[member];b=new e(g,w),$("#member").append('<div class="wrap-member"></div>'),$(".wrap-member").last().attr("data-user",""+b.userName).append('<img class="avatar-github" src='+b.avatar+"/>").append("<p>"+b.userName+"</p>").append('<input type="checkbox"/>')}var C=$(".js-size").outerHeight(!0);$(".wrap-users-member").outerHeight(C);var y=[];$.each(f,function(a,e){var r=[],t=$('#infos div[data-user="'+f[a]+'"]');$.each(t,function(a,e){var s=t.eq(a).attr("data-words");parseInt(s),r.push(s)}),y.push(r)});var k=[];for(loop in y){y[loop].length;for(var N=0,j=0;j<y[loop].length;j++){N+=parseInt(y[loop][j])}k.push(N)}var _=document.getElementById("myChart").getContext("2d");new Chart(_,{type:"pie",data:{labels:f,datasets:[{label:"My First dataset",backgroundColor:"#0def87",data:k}]},options:{}});console.log(k)}),$("#url-github").val("")}),$(document).on("click",".wrap-member",function(){var a=$(this).attr("data-user");$(this).find("input").prop("checked"),$(this).toggleClass("wrap-member-hide");$("#infos").find("[data-user="+a+"]").toggle()})});