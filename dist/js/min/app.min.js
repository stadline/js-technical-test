"use strict";function ajaxGet(e,t){var s=new XMLHttpRequest;s.open("GET",e),s.addEventListener("load",function(){s.status>=200&&s.status<400?t(s.responseText):console.error(s.status+" "+s.statusText+" "+e)}),s.addEventListener("error",function(){console.error("Erreur rÃ©seau avec l'URL "+e)}),s.send(null)}
"use strict";function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}$(function(){var a=function a(e,r,t,s,n){_classCallCheck(this,a),this.avatar=e,this.comment=r,this.words=t,this.admin=s,this.userName=n},e=function a(e,r,t){_classCallCheck(this,a),this.avatar=e,this.userName=r};cleanArray=function(a){var e,r,t=a.length,s=[],n={};for(e=0;e<t;e++)n[a[e]]=0;for(r in n)s.push(r);return s},$("#btn-url-github").on("click",function(r){r.preventDefault();var t=$("#url-github").val().split("https://github.com/")[1],s=[];ajaxGet("https://api.github.com/repos/"+t,function(e){var r=$.parseJSON(e),t=r.user.avatar_url,n=r.body,m=r.user.login,o=r.body.length;$(".search form").after("<h3>"+r.title+"</h3>"),$("#infos").append('<div class="wrap-user-comment" data-user='+m+' data-words="'+o+'"></div>'),$(".wrap-user-comment").append('<img class="avatar-github" src='+t+" />").append("<p>"+n+"</p>");var u=new a(t,n,o,!0,m);s.push(u)}),ajaxGet("https://api.github.com/repos/"+t+"/comments",function(r){var t=$.parseJSON(r),n=$(".wrap-user-comment").first().data("user");for(comment in t){var m=t[comment].user.avatar_url,o=t[comment].body,u=t[comment].body.length,c=t[comment].user.login,i="user"+comment;i=new a(m,o,u,c===n,c),s.push(i)}for(user in s)$("#infos").last().append('<div class="wrap-comment" data-user='+s[user].userName+" data-words="+s[user].words+"></div>"),$(".wrap-comment").last().append('<img class="avatar-github" src='+s[user].avatar+" />").append("<p>"+s[user].comment+"</p>"),!0===s[user].admin&&$(".wrap-comment").eq(user).addClass("wrap-user-comment");$("#infos .wrap-user-comment").first().remove(),$(".wrap-user-comment").removeClass("wrap-comment");var p=[],l=[];for(tab in s){var h=s[tab].avatar,d=s[tab].userName;p.push(h),l.push(d)}var v=cleanArray(p),f=cleanArray(l);console.log(v,f);for(member in v){var b="user"+comment,w=v[member],g=f[member];b=new e(w,g),$("#member").append('<div class="wrap-member"></div>'),$(".wrap-member").last().attr("data-user",""+b.userName).append('<img class="avatar-github" src='+b.avatar+"/>").append("<p>"+b.userName+"</p>").append('<input type="checkbox"/>')}}),$("#url-github").val("")})});